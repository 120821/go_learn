---
layout: post
title: "MySQL使用explain关注哪些字段?"
date: 2024-03-15
categories: [go 基础知识]
---
在MySQL中，`EXPLAIN`命令是用来分析SELECT查询的执行计划的。
explain优化查询语句，使用`EXPLAIN`时，有几个关键字段特别值得关注：

1. **id**: 这个字段表示查询的标识符。如果查询包含多个部分（比如UNION或子查询），MySQL会为每个部分分配一个不同的id。这个值可以帮助理解查询的执行顺序。

2. **select_type**: 这个字段显示了查询的类型，比如SIMPLE表示简单的SELECT查询（不使用UNION或子查询），PRIMARY表示查询中最外层的SELECT，SUBQUERY表示子查询等。这个字段可以帮助理解查询的结构。

3. **table**: 显示了该步骤访问的是哪个表或者是哪个派生表（临时表）。

4. **type**: 这是一个非常重要的字段，因为它表示了MySQL是如何查找数据的。值从最好到最坏依次是：system > const > eq_ref > ref > range > index > ALL。通常，希望避免type为ALL的全表扫描，因为这意味着MySQL需要读取表中的每一行来查找匹配的行。

5. **possible_keys**: 显示了MySQL可以用来查找的索引。如果这里没有显示索引，可能意味着需要创建一个新的索引来改进查询性能。

6. **key**: 这个字段显示了MySQL实际决定使用的索引。如果这个值是NULL，说明没有使用索引。

7. **key_len**: 显示了MySQL在索引中使用的字节数。这个值越小越好，因为它表示索引占用的空间更少，查询可能更快。

8. **ref**: 显示了哪些列或常数被用于和key一起从表中选择行。

9. **rows**: 非常关键的一个字段，表示MySQL认为必须检查的行数，以找到查询结果。这个数值越小，表示查询效率可能越高。

10. **Extra**: 这个字段提供了不适合在其他列中显示但对理解查询执行很重要的额外信息。比如，如果看到"Using where"，意味着MySQL将在服务器端进行额外的过滤来找到结果集；"Using index"表示查询能够通过索引来完成，没有必要读取数据行，这通常是性能较高的查询。

通过分析这些字段，可以获取查询的执行细节，从而对查询进行优化，比如通过增加或调整索引、修改查询结构等方法来提高查询速度。


